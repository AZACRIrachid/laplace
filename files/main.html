<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Laplace</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/main.css">
</head>
<body>

<nav class="navbar">
    <span class="navbar-brand">Laplace</span>
    <span class="navbar-brand header-room" id="room-text"></span>
</nav>

<div class="container">
    <div class="panel" id="panel">
        <h4>About Laplace</h4>
        <p class="help-text">
            Laplace is a project to enable screen sharing directly via browser,
            made possible using WebRTC for low latency peer-to-peer connections,
            and websocket implemented in golang for WebRTC signaling.
        </p>

        <div class="separator"></div>

        <h4>Start new stream</h4>
        <p class="help-text">
            By clicking the button below, you will create a new streaming room.
            Share the room ID to your peers.
            The room ID will be available on the top-right position on this page.
        </p>
        <button type="button" class="btn btn-outline-secondary btn-block" id="btnStream">Stream</button>

        <div class="separator"></div>

        <h4>Join stream</h4>
        <p class="help-text">
            Input the room ID and click the button below to join a streaming room.
            Get the room ID from your streaming peer.
            The room ID is available on the top right on their page.
        </p>
        <form id="joinForm">
            <div class="form-group">
                <input id="inputRoomID" type="text" class="form-control" placeholder="Enter room ID" required>
            </div>
            <button type="submit" class="btn btn-outline-secondary btn-block" value="submit">Join</button>
        </form>
    </div>
</div>

<div class="container container-small" id="stream-serve-page-ui">
    <div class="config-panel">
        <div class="row">
            <div class="col-md-9">
                <h4>Stream Configuration</h4>
                <p class="help-text">
                    Choose the configuration preset, then click the start stream button.
                    For advance user, you can modify the option directly, please note that it may incur errors.
                </p>
            </div>
            <div class="col-md-3 text-md-right">
                <div class="form-group">
                    <button type="button" class="btn btn-lg btn-secondary btn-block-xs-only" id="btnStartStream">Start stream</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label for=optionPreset>Preset</label>
                    <br>
                    <select name="optionPreset" id="inputOptionPreset" class="form-control"></select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for=displayMediaOption>DisplayMedia option</label>
                    <textarea name="displayMediaOption" id="inputDisplayMediaOption" cols="30" rows="5" class="form-control"></textarea>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for=RTPPeerConnection>RTPPeerConnection option</label>
                    <textarea name="RTPPeerConnectionOption" id="inputRTPPeerConnectionOption" cols="30" rows="5" class="form-control"></textarea>
                </div>
            </div>
        </div>
    </div>
    <button type="button" class="btn btn-secondary btn-block-xs-only" id="btnStream" onclick="leaveRoom()">Cancel</button>
</div>

<div class="container-fluid" id="video-container">
    <div id="video-wrapper">
        <video id="mainVideo" autoplay playsinline controls>
        </video>
    </div>
</div>

<br><br>

<div class="container container-small" id="stream-page-ui">
    <div class="row">
        <div class="col-md-9">
            <h4>Join the Room</h4>
            <p class="help-text">
                Share the room ID to your peers.
                The room ID will be available on the top right position on this page.
                They can also join with this link:
            </p>
            <a href="#" id="join-link" target="_blank"></a>
            <br><br>
        </div>
        <div class="col-md-3">
            <div id="qrcode"></div>
        </div>
    </div>
    <hr>
    <div>
        <button type="button" class="btn btn-outline-secondary btn-block-xs-only" id="btnStream" onclick="leaveRoom()">Leave Room</button>
    </div>
    <hr>
    <pre id="output"></pre>
</div>

<div class="container">
    <hr>
    <div class="text-center small" id="footer">
        <span>Laplace Project by Adam Jordan.</span>
        <a href="https://github.com/adamyordan/laplace">Source Code</a>
    </div>
</div>

<script src="/static/qrcode.min.js"></script>
<script src="/static/main.js"></script>
</body>
</html>